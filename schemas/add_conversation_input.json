{
    "type": "object",
    "properties": {
        "user_input": {
            "type": "string",
            "description": "The user's input or question."
        },
        "agent_response": {
            "type": "string",
            "description": "The agent's response."
        },
        "user_id": {
            "type": "string",
            "description": "User identifier for memory isolation."
        },
        "message_id": {
            "type": "string",
            "description": "Optional unique message ID for linking memories."
        },
        "timestamp": {
            "type": "string",
            "description": "Optional ISO format timestamp.",
            "format": "date-time"
        },
        "meta_data": {
            "type": "object",
            "description": "Optional metadata dictionary."
        },
        "execution_details": {
            "type": "object",
            "description": "Optional dictionary with execution details.",
            "properties": {
                "tools_used": {
                    "type": "array",
                    "items": { "type": "string" },
                    "description": "List of tools used during execution."
                },
                "errors": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "error_type": { "type": "string" },
                            "error_message": { "type": "string" },
                            "tool": { "type": "string" }
                        },
                        "required": ["error_type", "error_message"]
                    },
                    "description": "List of error dictionaries."
                },
                "duration_ms": {
                    "type": "integer",
                    "description": "Execution duration in milliseconds."
                },
                "success": {
                    "type": "boolean",
                    "description": "Whether the execution was successful."
                }
            }
        }
    },
    "required": ["user_input", "agent_response", "user_id"]
}
